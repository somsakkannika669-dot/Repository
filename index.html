<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Shop</title>

<style>
body{background:#0f0f0f;color:#fff;font-family:sans-serif;text-align:center}
.card{background:#1c1c1c;padding:20px;margin:15px;border-radius:15px}
button{background:#00e6a8;border:none;padding:10px 20px;border-radius:10px;cursor:pointer;margin:5px}
input{padding:8px;border-radius:8px;border:none;margin:5px}
.admin-btn{position:fixed;top:10px;right:10px}
.hidden{display:none}
.small{font-size:12px;color:#aaa}
</style>
</head>
<body>

<button class="admin-btn" onclick="adminLogin()">üîê</button>

<h1>üõç ‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h1>
<div id="product-list"></div>

<div class="card">
<h2>üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
<div id="cart-items"></div>
<h3>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="total">0</span> ‡∏ö‡∏≤‡∏ó</h3>

<h3>üì≤ ‡∏™‡πÅ‡∏Å‡∏ô‡∏à‡πà‡∏≤‡∏¢ PromptPay</h3>
<div id="qrBox" class="small">QR ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</div>
<br>
<input type="file" id="slipUpload">
<br>
<button onclick="submitOrder()">‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
<button onclick="clearCart()">‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
</div>

<div class="card">
<h2>üì¶ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
<div id="order-history"></div>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="hidden">
<div class="card">
<h2>‚öô ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h2>

<h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
<input type="text" id="newName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
<input type="number" id="newPrice" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
<button onclick="addProduct()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>

<h3>üóë ‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
<div id="admin-products"></div>

<h3>üì¶ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
<div id="admin-orders"></div>

<button onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</button>
</div>
</div>

<script>
/* ====== ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ====== */
const PROMPTPAY_PHONE="0989871584"; // üî¥ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏Ñ‡∏∏‡∏ì
const ADMIN_PASS="2005"; // üî¥ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
/* ==================== */

let cart=[];
let total=0;

/* ---------- ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ---------- */
function loadProducts(){
let products=JSON.parse(localStorage.getItem("products"))||[
{name:"‡∏û‡∏≤‡πÅ‡∏ô‡∏• 97%",price:250},
{name:"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô",price:150}
];
localStorage.setItem("products",JSON.stringify(products));

let container=document.getElementById("product-list");
let adminList=document.getElementById("admin-products");
container.innerHTML="";
adminList.innerHTML="";

products.forEach((p,index)=>{
container.innerHTML+=`
<div class="card">
<h2>${p.name}</h2>
<p>${p.price} ‡∏ö‡∏≤‡∏ó</p>
<button onclick="addToCart('${p.name}',${p.price})">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
</div>`;

adminList.innerHTML+=`
<p>${p.name} - ${p.price} ‡∏ö‡∏≤‡∏ó 
<button onclick="deleteProduct(${index})">‡∏•‡∏ö</button></p>`;
});
}

/* ---------- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ---------- */
function addProduct(){
let name=document.getElementById("newName").value;
let price=parseInt(document.getElementById("newPrice").value);

if(!name||!price){alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");return;}

let products=JSON.parse(localStorage.getItem("products"))||[];
products.push({name,price});
localStorage.setItem("products",JSON.stringify(products));
alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß");
loadProducts();
}

/* ---------- ‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ---------- */
function deleteProduct(i){
let products=JSON.parse(localStorage.getItem("products"));
products.splice(i,1);
localStorage.setItem("products",JSON.stringify(products));
loadProducts();
}

/* ---------- ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ ---------- */
function addToCart(name,price){
cart.push({name,price});
renderCart();
}

function renderCart(){
let container=document.getElementById("cart-items");
container.innerHTML="";
total=0;

cart.forEach(i=>{
container.innerHTML+=`<p>${i.name} - ${i.price} ‡∏ö‡∏≤‡∏ó</p>`;
total+=i.price;
});

document.getElementById("total").innerText=total;
generateQR();
}

function clearCart(){
cart=[];
renderCart();
document.getElementById("qrBox").innerHTML="QR ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°";
}

/* ---------- QR ---------- */
function generateQR(){
if(total<=0){
document.getElementById("qrBox").innerHTML="QR ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°";
return;
}
let amount=total.toFixed(2);
let url=`https://promptpay.io/${PROMPTPAY_PHONE}/${amount}.png`;
document.getElementById("qrBox").innerHTML=
`<img src="${url}" width="220">
<div class="small">‡πÄ‡∏ö‡∏≠‡∏£‡πå ${PROMPTPAY_PHONE} | ${amount} ‡∏ö‡∏≤‡∏ó</div>`;
}

/* ---------- ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ ---------- */
function submitOrder(){
if(total===0){alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤");return;}
let slip=document.getElementById("slipUpload").files[0];
if(!slip){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ");return;}

let orders=JSON.parse(localStorage.getItem("orders"))||[];
orders.push({
date:new Date().toLocaleString(),
total:total,
slip:slip.name,
status:"‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"
});
localStorage.setItem("orders",JSON.stringify(orders));

alert("‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
cart=[];
renderCart();
loadOrders();
}

/* ---------- ‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå ---------- */
function loadOrders(){
let orders=JSON.parse(localStorage.getItem("orders"))||[];
let history=document.getElementById("order-history");
let admin=document.getElementById("admin-orders");
history.innerHTML="";
admin.innerHTML="";

orders.forEach((o,i)=>{
history.innerHTML+=`
<p>üïí ${o.date}<br>
üí∞ ${o.total} ‡∏ö‡∏≤‡∏ó<br>
üìé ${o.slip}<br>
üìå ${o.status}</p><hr>`;

admin.innerHTML+=`
<p>${o.date} - ${o.total} ‡∏ö‡∏≤‡∏ó - ${o.status}
<br>
<button onclick="approve(${i})">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button>
<button onclick="deleteOrder(${i})">‡∏•‡∏ö</button>
</p><hr>`;
});
}

function approve(i){
let orders=JSON.parse(localStorage.getItem("orders"));
orders[i].status="‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß";
localStorage.setItem("orders",JSON.stringify(orders));
loadOrders();
}

function deleteOrder(i){
let orders=JSON.parse(localStorage.getItem("orders"));
orders.splice(i,1);
localStorage.setItem("orders",JSON.stringify(orders));
loadOrders();
}

/* ---------- ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ---------- */
function adminLogin(){
let pass=prompt("‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô");
if(pass===ADMIN_PASS){
document.getElementById("adminPanel").classList.remove("hidden");
}else alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î");
}

function logout(){
document.getElementById("adminPanel").classList.add("hidden");
}

/* ---------- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö ---------- */
loadProducts();
loadOrders();
</script>

</body>
</html>
