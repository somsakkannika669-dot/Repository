<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rin-GOD SHOP</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(to bottom,#2b0000,#000);
  color:white;
  text-align:center;
}

h1{
  background:linear-gradient(to right,#ff3c3c,#b30000);
  padding:20px;
  border-radius:20px;
  margin:20px;
}

.menu button{
  background:linear-gradient(to right,#ff3c3c,#b30000);
  border:none;
  padding:15px 25px;
  margin:10px;
  border-radius:20px;
  color:white;
  font-size:16px;
}

#product-list{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:20px;
  padding:20px;
}

.product{
  background:#111;
  border:2px solid red;
  border-radius:20px;
  padding:15px;
}

.product img{
  width:100%;
  border-radius:15px;
}
</style>
</head>

<body>

<h1>B-GOD SHOP</h1>

<div class="menu">
  <button>สินค้า</button>
  <button>ตะกร้า</button>
  <button>แอดมิน</button>
</div>

<div id="product-list"></div>


<!-- FIREBASE SCRIPT -->
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDxhFMeqFzsGhZPyN999",
  authDomain: "bgod-shop.firebaseapp.com",
  projectId: "bgod-shop",
  storageBucket: "bgod-shop.appspot.com",
  messagingSenderId: "518490266795",
  appId: "1:518490266795:web:34143c9"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);


// โหลดสินค้า
async function loadProducts(){
  const list = document.getElementById("product-list");
  list.innerHTML="";

  const querySnapshot = await getDocs(collection(db, "products"));

  querySnapshot.forEach((doc)=>{
    let p = doc.data();

    list.innerHTML += `
      <div class="product">
        <img src="${p.img}">
        <h3>${p.name}</h3>
        <p style="color:red;">${p.price} บาท</p>
        <button onclick="addToCart('${p.name}',${p.price})">
          เพิ่มลงตะกร้า
        </button>
      </div>
    `;
  });
}

loadProducts();


// เพิ่มสินค้า (เรียกจากหน้าแอดมินได้)
window.addProduct = async function(name,price,img){
  await addDoc(collection(db, "products"), {
    name:name,
    price:price,
    img:img
  });

  alert("เพิ่มสินค้าแล้ว");
  loadProducts();
}


// ตะกร้าจำลอง
window.addToCart = function(name,price){
  alert("เพิ่ม "+name+" ลงตะกร้าแล้ว");
}

</script>

</body>
</html>
