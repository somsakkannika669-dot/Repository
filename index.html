<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>My Shop</title>
</head>
<body>

<h1>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h1>
<div id="product-list"></div>

<h2>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h2>
<div id="cart"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// üî• ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
const firebaseConfig = {
  apiKey: "AIzaSyCmO6wrh1loVv8ktjrqT...",
  authDomain: "myshop-cd2cb.firebaseapp.com",
  projectId: "myshop-cd2cb",
  storageBucket: "myshop-cd2cb.appspot.com",
  messagingSenderId: "308991984475",
  appId: "1:308991984475:web:0b6a8c8..."
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const productList = document.getElementById("product-list");
const cartDiv = document.getElementById("cart");

let cart = [];

function renderCart() {
  cartDiv.innerHTML = "";
  cart.forEach(item => {
    cartDiv.innerHTML += `<p>${item.name} - ${item.price} ‡∏ö‡∏≤‡∏ó</p>`;
  });
}

async function loadProducts() {
  const querySnapshot = await getDocs(collection(db, "products"));
  querySnapshot.forEach((doc) => {
    const data = doc.data();
    const div = document.createElement("div");
    div.innerHTML = `
      <p><b>${data.name}</b></p>
      <p>${data.price} ‡∏ö‡∏≤‡∏ó</p>
      <button>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
      <hr>
    `;
    div.querySelector("button").onclick = () => {
      cart.push(data);
      renderCart();
    };
    productList.appendChild(div);
  });
}

loadProducts();
</script>

</body>
</html>
